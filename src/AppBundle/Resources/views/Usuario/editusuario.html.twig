{% extends 'base.html.twig' %}


{% block body %}
    <h1>Edit User</h1>


    <form>

        {# Input oculto para mantener el ID del Usuario #}
        <input type="hidden" id="id" value="{{ usuario.id }}">

        <div class="form-group">
            <label for="nombre">Nombre</label>
            <input type="text"  class="form-control" id="nombre" value="{{ usuario.nombre }}">
        </div>

        <div class="form-group">
            <label for="apellido">Apellido</label>
            <input type="text" class="form-control" id="apellido" value="{{ usuario.apellido }}">
        </div>

        <div class="form-group">
            <label for="usuario">Usuario</label>
            <input type="text" class="form-control" id="usuario" value="{{ usuario.username }}">
        </div>

        <div class="form-group">
            <label for="usuarioPass">Usuario Clave</label>
            <input type="text" class="form-control" id="usuarioPass" value="{{ usuario.userPass }}">
        </div>

        <div class="form-group">
            <label for="usuarioTipo">Tipo Usuario</label>
            <input type="text" class="form-control" id="usuarioTipo" value="{{ usuario.tipoUser }}">
        </div>

        <div class="form-group">
            <label for="idRol">rol</label>
            <input type="text" class="form-control" id="idRol" value="{{ usuario.rolID }}">
        </div>

        <div class="form-group">
            <label for="estado">Estado</label>
            <input type="text" class="form-control" id="estado" value="{{ usuario.estado }}">
        </div>

        <button type="button" id="udpUsuario" class="btn btn-success"> <span>Actualizar</span> </button>
        <a class="btn btn-danger" href="{{ path('usuario') }}"><span>Cancelar</span> </a>

    </form>



{% endblock %}

{% block javascripts %}
    {{ parent() }}

     <script>

         function  udpUsuario(usuario) {
             alert(JSON.stringify(usuario));

             $.ajax({
                 type: "PUT",
                 data: JSON.stringify(usuario),
                 url: "http://systicket/app_dev.php/usuario/"+usuario.id+"/",
                 error: function() {

                 },
                 success: function (data) {

                     window.location = Routing.generate('usuario');
                 }
             });

         }

         $(document).ready(function () {

             $('#udpUsuario').click(function () {

                 var id = $('#id').val();
                 var nombre = $('#nombre').val();
                 var apellido = $('#apellido').val();
                 var usuario = $('#usuario').val();
                 var clave = $('#usuarioPass').val();
                 var tipo = $('#usuarioTipo').val();
                 var rolid = $('#idRol').val();
                 var estado = $('#estado').val();


                 udpUsuario({ id: id, nombre : nombre, apellido: apellido, username: usuario, userPass: clave, tipoUser: tipo, rolID: rolid, estado: estado });

             });


         });
         </script>

   
{% endblock %}

